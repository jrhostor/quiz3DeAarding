<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <title>Quiz</title>
  </head>
  <body>
    <div id="root"></div>

    <!-- Your app entry (Vite/React dev). In production this will point to the built JS file. -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Replit dev banner (OK to keep) -->
    <script src="https://replit.com/public/js/replit-dev-banner.js"></script>

    <!-- âœ… Post the height to the parent (Funnelish) so the iframe can auto-resize -->
<script>
  (function () {
    var last = 0;
    var ticking = false;
    var debounceId = null;

    function computeHeight() {
      // robust max across browsers
      return Math.max(
        document.documentElement.scrollHeight,
        document.body.scrollHeight,
        document.documentElement.offsetHeight,
        document.body.offsetHeight,
        document.documentElement.clientHeight
      );
    }

    function postHeight(force) {
      if (ticking) return;
      ticking = true;
      requestAnimationFrame(function () {
        ticking = false;
        var h = computeHeight();
        if (force || Math.abs(h - last) > 5) {
          last = h;
          window.parent.postMessage({ type: "quiz:height", value: h }, "*");
        }
      });
    }

    // Debounced notifier for DOM changes
    function schedulePost(force) {
      clearTimeout(debounceId);
      debounceId = setTimeout(function () { postHeight(!!force); }, 60);
    }

    // Initial + staged checks for hydration/fonts/images
    window.addEventListener("load", function () {
      postHeight(true);
      setTimeout(function(){ postHeight(true); }, 120);
      setTimeout(function(){ postHeight(true); }, 300);
      setTimeout(function(){ postHeight(true); }, 800);
    });

    // On resize (e.g., mobile rotation / keyboard)
    window.addEventListener("resize", function () { schedulePost(false); });

    // On DOM mutations (route changes, expanding answers, etc.)
    new MutationObserver(function () { schedulePost(false); }).observe(document.body, {
      childList: true, subtree: true, attributes: true, characterData: true
    });
  })();
</script>
  </body>
</html>
